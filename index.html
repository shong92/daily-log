
<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ê¸°íšì„¸í¬ ì¼ì¼ë¡œê·¸</title>
<style>
    :root {
      --bg: #f8f8f8;
      --fg: #000;
      --card: #fff;
      --border: #ccc;
      --accent: #4a90e2;
      --entry-border: #eee;
    }
    body.dark {
      --bg: #121212;
      --fg: #f2f2f2;
      --card: #1e1e1e;
      --border: #333;
      --accent: #90c3ff;
      --entry-border: #444;
    }
    body {
      background: var(--bg);
      color: var(--fg);
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    .wrapper {
      display: flex;
      justify-content: center;
      padding: 2em 1em;
    }
    .container {
      width: 100%;
      max-width: 600px;
      background: var(--card);
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      border-radius: 10px;
      border: 1px solid var(--border);
      position: relative;
    }
    .dark-toggle {
  padding: 0px;
  margin: 0;
      position: fixed;
      top: 10px;
      left: 1px;
      width: auto;
      height: auto;
      z-index: 1000;
      font-size: 1.2em;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--fg);
    }
    h2 {
      font-size: 1.5em;
      text-align: center;
      margin: 0 0 20px 0;
    }
    input[type="date"], input[type="text"], textarea, button, select {
      width: 100%;
      box-sizing: border-box;
      margin-top: 10px;
      padding: 10px;
      font-size: 1em;
      border: 1px solid var(--border);
      border-radius: 5px;
      background: var(--card);
      color: var(--fg);
    }
    button {
      background-color: var(--accent);
      color: white;
      font-weight: bold;
    }
    button:hover {
      opacity: 0.9;
    }
    .emoji-picker {
      margin-top: 5px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .emoji {
      cursor: pointer;
      font-size: 1.3em;
    }
    .log-entry {
      border-bottom: 1px solid var(--entry-border);
      padding: 10px 0;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .log-entry-content {
      padding-right: 60px;
    }
    .time {
      color: #888;
      font-size: 0.85em;
    }
    .delete-btn {
      display: none;
      position: absolute;
      right: 1px;
      top: 10px;
      padding: 0px 4px;
      width: auto;
      font-size: 1.1em;
      color: var(--accent);
      background: none;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      white-space: nowrap;
    }
    .log-entry:hover .delete-btn {
      display: inline-block;
    }
    .tag {
      display: inline-block;
      margin-left: 5px;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
      font-weight: bold;
      color: white;
    }
    .tag-ì—…ë¬´ { background-color: #2d87f0; }
    .tag-í•™ìŠµ { background-color: #4caf50; }
    .tag-ìš´ë™ { background-color: #ff9800; }
    .tag-ì¼ìƒ { background-color: #9c27b0; }
    .tag-ê¸°íƒ€ { background-color: #607d8b; }
  </style>
</head>
<body>
<div class="wrapper">
<div class="container"><button class="dark-toggle" onclick="toggleDarkMode(this)" style="position: absolute; top: 10px; left: 10px;">ğŸŒ™</button>
    <button onclick="deleteAllLogs()" style="position: absolute; top: 10px; right: 10px; background: none; border: none; width: auto; font-size: 1.1em; cursor: pointer; padding: 0;" title="ì „ì²´ì‚­ì œ">ğŸ—‘ï¸</button>
<h2>ğŸ“ ê¸°íšì„¸í¬ ì¼ì¼ë¡œê·¸</h2>
<input id="dateFilter" onchange="filterLogs()" type="date"/>
<textarea id="logText" placeholder="ì˜¤ëŠ˜ì˜ í™œë™ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
<div class="emoji-picker">
<span class="emoji" onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
<span class="emoji" onclick="insertEmoji('ğŸ”¥')">ğŸ”¥</span>
<span class="emoji" onclick="insertEmoji('ğŸ’¡')">ğŸ’¡</span>
<span class="emoji" onclick="insertEmoji('âœï¸')">âœï¸</span>
<span class="emoji" onclick="insertEmoji('âœ…')">âœ…</span>
<span class="emoji" onclick="insertEmoji('âœ¨')">âœ¨</span>
<span class="emoji" onclick="insertEmoji('ğŸ’•')">ğŸ’•</span>
</div>
<button onclick="saveLog()">âœ… ê¸°ë¡í•˜ê¸°</button><div style="display: flex; gap: 10px; margin-top: 10px; align-items: center;"><select id="tagFilter" onchange="filterLogs()" style="width: 80px; min-width: 60px; padding: 8px; font-size: 1em;">
<option value="">ì „ì²´</option>
<option value="ì—…ë¬´">ì—…ë¬´</option>
<option value="í•™ìŠµ">í•™ìŠµ</option>
<option value="ìš´ë™">ìš´ë™</option>
<option value="ì¼ìƒ">ì¼ìƒ</option>
<option value="ê¸°íƒ€">ê¸°íƒ€</option>
</select><input id="searchInput" oninput="filterLogs()" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" type="text"/></div>
<div id="logList"></div>
</div>
</div>
<script>
function toggleDarkMode(btn) {
  btn.textContent = document.body.classList.contains('dark') ? 'ğŸŒ™' : 'â˜€ï¸';
  document.body.classList.toggle("dark");
  localStorage.setItem("darkMode", document.body.classList.contains("dark"));
}

if (localStorage.getItem("darkMode") === "true") {
  document.body.classList.add("dark");
}

function insertEmoji(emoji) {
  const textarea = document.getElementById("logText");
  textarea.value += emoji;
  textarea.focus();
}

function loadLogs() {
  return JSON.parse(localStorage.getItem("dailyLogData") || "[]");
}

function saveLog() {
  const text = document.getElementById("logText").value.trim();
  if (!text) return;
  const now = new Date();
  const date = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().split("T")[0];
  const time = now.toLocaleTimeString();
  const logs = loadLogs();
  logs.push({ id: Date.now(), text, date, time });
  localStorage.setItem("dailyLogData", JSON.stringify(logs));
  document.getElementById("logText").value = "";
  filterLogs();
}

function deleteLog(id) {
  let logs = loadLogs();
  logs = logs.filter(log => log.id !== id);
  localStorage.setItem("dailyLogData", JSON.stringify(logs));
  filterLogs();
}

function filterLogs() {
  const logs = loadLogs();
  const selectedDate = document.getElementById("dateFilter").value;
  const searchKeyword = document.getElementById("searchInput").value.toLowerCase();
  const selectedTag = document.getElementById("tagFilter").value;

  let filtered = logs;

  if (selectedDate) {
    filtered = filtered.filter(log => log.date === selectedDate);
  }
  if (searchKeyword) {
    filtered = filtered.filter(log => log.text.toLowerCase().includes(searchKeyword));
  }
  if (selectedTag) {
    filtered = filtered.filter(log => log.text.includes("#" + selectedTag));
  }

  const list = document.getElementById("logList");
  list.innerHTML = "";
  filtered.reverse().forEach(log => {
    const tagSpan = log.text.replace(/#(ì—…ë¬´|í•™ìŠµ|ìš´ë™|ì¼ìƒ|ê¸°íƒ€)/g, '<span class="tag tag-$1">$1</span>');
    list.innerHTML += `
      <div class="log-entry">
        <div class="log-entry-content">
          <div class="time">${log.date} ${log.time}</div>
          <div>${tagSpan}</div>
        </div>
        <button class="delete-btn" onclick="deleteLog(${log.id})">ğŸ—‘ï¸</button>
      </div>`;
  });
}

document.getElementById("logText").addEventListener("keydown", function(e) {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    saveLog();
  }
});

filterLogs();


function deleteAllLogs() {
  if (confirm("ì •ë§ ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
    localStorage.removeItem("dailyLogData");
    filterLogs();
  }
}
</script>
</body>
</html>
